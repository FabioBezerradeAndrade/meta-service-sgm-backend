---
openapi: 3.0.1
info:
  title: Meta-Service-SGM API V1
  version: v1
components:
  securitySchemes:
    tokenAuth:
      type: apiKey
      in: header
      name: access-token
      description: 'Token de autenticação (Devise Token Auth). Requer também os headers:
        client e uid.'
    clientHeader:
      type: apiKey
      in: header
      name: client
    uidHeader:
      type: apiKey
      in: header
      name: uid
security:
- tokenAuth: []
- clientHeader: []
- uidHeader: []
servers:
- url: http://localhost:3000
  description: Servidor de Desenvolvimento
paths:
  "/addresses":
    get:
      summary: List addresses with filters - Lista todos endereços (com ou sem filtro)
      tags:
      - Addresses - Endereços
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            zip_code_cont:
              type: string
            state_cont:
              type: string
            city_cont:
              type: string
            district_cont:
              type: string
            street_cont:
              type: string
            number_eq:
              type: string
            complement_cont:
              type: string
            meeting_point_cont:
              type: string
            landmark_cont:
              type: string
            addressable_type_eq:
              type: string
            addressable_id_eq:
              type: integer
      responses:
        '200':
          description: addresses filtered
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      summary: create address - Cadastra um endereço
      tags:
      - Addresses - Endereços
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                zip_code:
                  type: string
                state:
                  type: string
                city:
                  type: string
                district:
                  type: string
                street:
                  type: string
                number:
                  type: string
                complement:
                  type: string
                meeting_point:
                  type: string
                landmark:
                  type: string
                addressable_type:
                  type: string
                addressable_id:
                  type: integer
              required:
              - zip_code
              - state
              - city
              - district
              - street
              - number
              - addressable_type
              - addressable_id
  "/addresses/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show address - Mostra detalhes de um Endereço
      tags:
      - Addresses - Endereços
      responses:
        '200':
          description: successful
    patch:
      summary: update address - Atualiza o cadastro de um Endereço
      tags:
      - Addresses - Endereços
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                zip_code:
                  type: string
                state:
                  type: string
                city:
                  type: string
                district:
                  type: string
                street:
                  type: string
                number:
                  type: string
                complement:
                  type: string
                meeting_point:
                  type: string
                landmark:
                  type: string
    delete:
      summary: delete address - Exclui cadastro de um Endereço
      tags:
      - Addresses - Endereços
      responses:
        '204':
          description: no content
  "/api/v1/alerts":
    get:
      summary: List alerts with filters - Lista todos os alerts com ou sem filtros
      tags:
      - Alerts - Alertas
      parameters:
      - name: category
        in: query
        description: Filtra por categoria (material ou certification)
        schema:
          type: string
      responses:
        '200':
          description: Lista de alerts retornada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    category:
                      type: string
                    resolved:
                      type: boolean
                    created_at:
                      type: string
                      format: date_time
                    updated_at:
                      type: string
                      format: date_time
                  required:
                  - id
                  - category
                  - resolved
                  - created_at
                  - updated_at
        '400':
          description: Parâmetros inválidos
  "/certifications":
    get:
      summary: list certifications - Lista Todos Certificados
      tags:
      - Certifications - Certificados
      responses:
        '200':
          description: successful
    post:
      summary: create certification - Cadastra um Certificado
      tags:
      - Certifications - Certificados
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                issue_date:
                  type: string
                  format: date
                expiration_date:
                  type: string
                  format: date
                employee_id:
                  type: integer
                position_id:
                  type: integer
              required:
              - name
              - issue_date
              - employee_id
  "/certifications/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show certification - Mostra detalhes de um Certificado
      tags:
      - Certifications - Certificados
      responses:
        '200':
          description: successful
    patch:
      summary: update certification - Atualiza o Cadastro de um Certificado
      tags:
      - Certifications - Certificados
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                expiration_date:
                  type: string
                  format: date
    delete:
      summary: delete certification - Exclui um Certificado
      tags:
      - Certifications - Certificados
      responses:
        '204':
          description: no content
  "/companies":
    get:
      summary: List companies with filters - Lista Todas as Empresas (com ou sem filtro)
      tags:
      - Companies - Empresas
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            state_registration_eq:
              type: string
            municipal_registration_eq:
              type: string
            corporate_name_cont:
              type: string
            trade_name_cont:
              type: string
            business_segment_cont:
              type: string
      responses:
        '200':
          description: companies filtered
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      summary: create company - Cadastra uma Empresa
      tags:
      - Companies - Empresas
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cnpj:
                  type: string
                state_registration:
                  type: string
                municipal_registration:
                  type: string
                corporate_name:
                  type: string
                trade_name:
                  type: string
                business_segment:
                  type: string
              required:
              - cnpj
              - corporate_name
  "/companies/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show company - Mostra detalhes de uma Empresa
      tags:
      - Companies - Empresas
      responses:
        '200':
          description: successful
    patch:
      summary: update company - Atualiza o cadastro de uma Empresa
      tags:
      - Companies - Empresas
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                trade_name:
                  type: string
                business_segment:
                  type: string
    delete:
      summary: delete company - Exclui o cadastro de uma Empresa
      tags:
      - Companies - Empresas
      responses:
        '204':
          description: no content
  "/contacts":
    get:
      summary: List contacts with filters - Lista todos os contatos (com ou sem filtro)
      tags:
      - Contacts - Contatos
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            email_cont:
              type: string
            phone_cont:
              type: string
            phone_type_eq:
              type: string
            carrier_eq:
              type: string
            contactable_type_eq:
              type: string
            contactable_id_eq:
              type: integer
      responses:
        '200':
          description: contacts filtered
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      summary: create contact - Cadastra um contato
      tags:
      - Contacts - Contatos
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                email:
                  type: string
                whatsapp:
                  type: string
                telegram:
                  type: string
                signal:
                  type: string
                contactable_type:
                  type: string
                contactable_id:
                  type: integer
                phone_type:
                  type: string
                department:
                  type: string
                carrier:
                  type: string
              required:
              - phone
              - contactable_type
              - contactable_id
  "/contacts/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show contact - Mostra detalhes de um Contato
      tags:
      - Contacts - Contatos
      responses:
        '200':
          description: successful
    patch:
      summary: update contact - Atualiza o cadastro de um Contato
      tags:
      - Contacts - Contatos
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                email:
                  type: string
                whatsapp:
                  type: string
    delete:
      summary: delete contact - Excluio cadastro de um Contato
      tags:
      - Contacts - Contatos
      responses:
        '204':
          description: no content
  "/departments":
    get:
      summary: List departments with filters - Lista todos os cadastros dos Departamentos
        (com ou sem filtro)
      tags:
      - Departments - Departamentos
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            name_cont:
              type: string
      responses:
        '200':
          description: departments filtered
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      summary: create department - Cadastra um Departamento
      tags:
      - Departments - Departamentos
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
  "/departments/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show department - Mostra detalhes de um Departamento
      tags:
      - Departments - Departamentos
      responses:
        '200':
          description: successful
    patch:
      summary: update department - Atualiza o cadastro de um Departamento
      tags:
      - Departments - Departamentos
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
    delete:
      summary: delete department - Exclui o cadastro de um Departamento
      tags:
      - Departments - Departamentos
      responses:
        '204':
          description: no content
  "/dependents":
    get:
      summary: List dependents with filters - Lista todos os cadastros dos Dependentes
        (com ou sem filtro)
      tags:
      - Dependents - Dependentes
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            employee_id_eq:
              type: integer
            created_at_gteq:
              type: string
              format: date-time
            birth_date_eq:
              type: string
              format: date
            full_name_cont:
              type: string
            kinship_eq:
              type: string
      responses:
        '200':
          description: dependents filtered
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      summary: create dependent - Cadastra um Dependente
      tags:
      - Dependents - Dependentes
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                full_name:
                  type: string
                kinship:
                  type: string
                birth_date:
                  type: string
                  format: date
                employee_id:
                  type: integer
              required:
              - full_name
              - employee_id
  "/dependents/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show dependent - Mostra detalhes de um Dependente
      tags:
      - Dependents - Dependentes
      responses:
        '200':
          description: successful
    patch:
      summary: update dependent - Atualiza o casdastro de um Dependente
      tags:
      - Dependents - Dependentes
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                full_name:
                  type: string
                kinship:
                  type: string
    delete:
      summary: delete dependent - Exclui o cadastro de um Dependente
      tags:
      - Dependents - Dependentes
      responses:
        '204':
          description: no content
  "/emergency_contacts":
    get:
      summary: list emergency contacts - Lista todos os cadastros dos Contatos de
        Emergência
      tags:
      - EmergencyContacts - Contatos de Emergência
      responses:
        '200':
          description: successful
    post:
      summary: create emergency contact - Cadastra um Contato de Emergência
      tags:
      - EmergencyContacts - Contatos de Emergência
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                full_name:
                  type: string
                phone:
                  type: string
                kinship:
                  type: string
                employee_id:
                  type: integer
                carrier:
                  type: string
              required:
              - full_name
              - phone
              - kinship
              - employee_id
  "/emergency_contacts/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show emergency contact - Mostra detalhes de um Contato de Emergência
      tags:
      - EmergencyContacts - Contatos de Emergência
      responses:
        '200':
          description: successful
    patch:
      summary: update emergency contact - Atualiza o cadastro de um Contato de Emergência
      tags:
      - EmergencyContacts - Contatos de Emergência
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                carrier:
                  type: string
    delete:
      summary: delete emergency contact - Exclui o cadastro de um Contato de Emergência
      tags:
      - EmergencyContacts - Contatos de Emergência
      responses:
        '204':
          description: no content
  "/employee_contracts":
    get:
      summary: list employee_contracts with filters - Lista todos cadastros dos Contratos
        de Colaboradores (com ou sem filtro)
      tags:
      - EmployeeContracts - Contratos de Colaborador
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            contract_type:
              type: string
            unit:
              type: string
            shift:
              type: string
            currency:
              type: string
            hourly_wage:
              type: number
            admission_date:
              type: string
              format: date
            trial_period:
              type: boolean
            registration_number:
              type: string
            direct_supervisor:
              type: string
            hierarchy_level:
              type: string
            contract_date:
              type: string
              format: date
            contract_duration:
              type: integer
            contract_expiration:
              type: string
              format: date
            total_days:
              type: integer
            employee_id:
              type: integer
            position_id:
              type: integer
            department_id:
              type: integer
            total_hours:
              type: integer
      responses:
        '200':
          description: successful
    post:
      summary: create employee_contract - Cadastra um Contrato de Colaborador
      tags:
      - EmployeeContracts - Contratos de Colaborador
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contract_type:
                  type: string
                unit:
                  type: string
                shift:
                  type: string
                currency:
                  type: string
                hourly_wage:
                  type: number
                admission_date:
                  type: string
                  format: date
                trial_period:
                  type: string
                registration_number:
                  type: string
                direct_supervisor:
                  type: string
                hierarchy_level:
                  type: string
                contract_date:
                  type: string
                  format: date
                contract_duration:
                  type: string
                contract_expiration:
                  type: string
                  format: date
                total_days:
                  type: integer
                employee_id:
                  type: integer
                position_id:
                  type: integer
                department_id:
                  type: integer
                start_date:
                  type: string
                  format: date
                end_date:
                  type: string
                  format: date
                total_hours:
                  type: string
  "/employee_contracts/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show employee_contract - Mostra detalhes de um Contrato de Colaborador
      tags:
      - EmployeeContracts - Contratos de Colaborador
      responses:
        '200':
          description: successful
    patch:
      summary: update employee_contract - Atualiza o cadastro de um Contrato de Colaborador
      tags:
      - EmployeeContracts - Contratos de Colaborador
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contract_type:
                  type: string
    delete:
      summary: delete employee_contract - Exclui o cadastro de um Contrato de Colaborador
      tags:
      - EmployeeContracts - Contratos de Colaborador
      responses:
        '204':
          description: no content
  "/employees":
    get:
      summary: list employees - Lista todos os Colaboradores
      tags:
      - Employees - Colaboradores
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            contract_type:
              type: string
            unit:
              type: string
            shift:
              type: string
            currency:
              type: string
            hourly_wage:
              type: number
            admission_date:
              type: string
              format: date
            trial_period:
              type: boolean
            registration_number:
              type: string
            direct_supervisor:
              type: string
            hierarchy_level:
              type: string
            contract_date:
              type: string
              format: date
            contract_duration:
              type: integer
            contract_expiration:
              type: string
              format: date
            total_days:
              type: integer
            employee_id:
              type: integer
            position_id:
              type: integer
            department_id:
              type: integer
            total_hours:
              type: integer
      responses:
        '200':
          description: successful
    post:
      summary: create employee - Cadastra um Colaborador
      tags:
      - Employees - Colaboradores
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                cpf:
                  type: string
                cbo:
                  type: string
                full_name:
                  type: string
                social_name:
                  type: string
                function:
                  type: string
                gender:
                  type: string
                birth_date:
                  type: string
                  format: date
                ethnicity:
                  type: string
                marital_status:
                  type: string
                country:
                  type: string
                nationality:
                  type: string
                status:
                  type: string
                education_level:
                  type: string
                height:
                  type: number
                weight:
                  type: number
              required:
              - first_name
              - cpf
  "/employees/{id}":
    parameters:
    - name: id
      in: path
      description: ID do funcionário
      required: true
      schema:
        type: string
    get:
      summary: show employee - Mostra detalhes de um Colaborador
      tags:
      - Employees - Colaboradores
      responses:
        '200':
          description: successful
    patch:
      summary: update employee - Atualiza o cadastro de um Colaborador
      tags:
      - Employees - Colaboradores
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                full_name:
                  type: string
    delete:
      summary: delete employee - Exclui o cadastro de um Colaborador
      tags:
      - Employees - Colaboradores
      responses:
        '204':
          description: no content
  "/materials":
    get:
      summary: list materials - Lista todos os Materiais (com ou sem filtro )
      tags:
      - Materials - Materiais
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            category:
              type: string
            approval_certificate:
              type: string
            internal_code:
              type: string
            color:
              type: string
            created_at:
              type: string
              format: date_time
            id:
              type: integer
            name:
              type: string
            current_quantity:
              type: integer
            minimum_quantity:
              type: integer
            size:
              type: string
            material_type:
              type: string
            unit_of_measure:
              type: string
            updated_at:
              type: string
              format: date_time
      responses:
        '200':
          description: successful
    post:
      summary: create material - Cadastra um Material
      tags:
      - Materials - Materiais
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                category:
                  type: string
                unit_of_measure:
                  type: string
                minimum_quantity:
                  type: integer
                current_quantity:
                  type: integer
                approval_certificate:
                  type: string
                material_type:
                  type: string
                color:
                  type: string
                size:
                  type: string
                internal_code:
                  type: string
  "/materials/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show material - Mostra detalhes de um Material
      tags:
      - Materials - Materiais
      responses:
        '200':
          description: successful
    patch:
      summary: update material - Atualiza o cadastro de um Material
      tags:
      - Materials - Materiais
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                current_quantity:
                  type: integer
    delete:
      summary: delete material - Exclui o cadastro de um Material
      tags:
      - Materials - Materiais
      responses:
        '204':
          description: no content
  "/positions":
    get:
      summary: list positions - Lista todos os Cargos (com ou sem filtro)
      tags:
      - Positions - Cargos
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            name:
              type: string
      responses:
        '200':
          description: successful
    post:
      summary: create position - Cadastra um Cargo
      tags:
      - Positions - Cargos
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
  "/positions/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show position - Mostra detalhes de um Cargo
      tags:
      - Positions - Cargos
      responses:
        '200':
          description: successful
    patch:
      summary: update position - Atualiza o cadastro de um Cargo
      tags:
      - Positions - Cargos
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
    delete:
      summary: delete position - Exclui o cadastro de um Cargo
      tags:
      - Positions - Cargos
      responses:
        '204':
          description: no content
  "/providers":
    get:
      summary: list providers - Lista Todos Fornecedores
      tags:
      - Providers - Fornecedores
      responses:
        '200':
          description: successful
    post:
      summary: create provider - Cadastra um Fornecedor
      tags:
      - Providers - Fornecedores
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                cnpj:
                  type: string
                address:
                  type: string
                phone:
                  type: string
                email:
                  type: string
  "/providers/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show provider - Mostra detalhes de um Fornecedor
      tags:
      - Providers - Fornecedores
      responses:
        '200':
          description: successful
    patch:
      summary: update provider - Atualiza o Cadastro de um Fornecedor
      tags:
      - Providers - Fornecedores
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
    delete:
      summary: delete provider - Exclui um Fornecedor
      tags:
      - Providers - Fornecedores
      responses:
        '204':
          description: no content
  "/stock_movements":
    get:
      summary: List stock movements - Lista todos os movimentos de estoque
      tags:
      - Stock Movements - Movimentos de Estoque
      security:
      - bearer_auth: []
      responses:
        '200':
          description: sucesso
  "/stock_movements/create_in":
    post:
      summary: Create entry movements - Cria movimento de entrada
      tags:
      - Stock Movements - Movimentos de Estoque
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '201':
          description: criado com sucesso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                stock_movement:
                  type: object
                  properties:
                    material_id:
                      type: integer
                    work_order_id:
                      type: integer
                    quantity:
                      type: number
                    moved_at:
                      type: string
                      format: date_time
                    notes:
                      type: string
                    employee_id:
                      type: integer
                  required:
                  - material_id
                  - work_order_id
                  - quantity
                  - moved_at
                  - employee_id
  "/stock_movements/create_out":
    post:
      summary: Create outgoing movement. - Cria movimento de saída
      tags:
      - Stock Movements - Movimentos de Estoque
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '201':
          description: criado com sucesso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                stock_movement:
                  type: object
                  properties:
                    material_id:
                      type: integer
                    work_order_id:
                      type: integer
                    quantity:
                      type: number
                    moved_at:
                      type: string
                      format: date
                    notes:
                      type: string
                    employee_id:
                      type: integer
                  required:
                  - material_id
                  - work_order_id
                  - quantity
                  - moved_at
                  - employee_id
  "/stock_movements/create_return":
    post:
      summary: Create return movement - Cria movimento de retorno
      tags:
      - Stock Movements - Movimentos de Estoque
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '201':
          description: criado com sucesso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                stock_movement:
                  type: object
                  properties:
                    material_id:
                      type: integer
                    work_order_id:
                      type: integer
                    quantity:
                      type: number
                    moved_at:
                      type: string
                      format: date
                    notes:
                      type: string
                    employee_id:
                      type: integer
                  required:
                  - material_id
                  - work_order_id
                  - quantity
                  - moved_at
                  - employee_id
  "/stock_movements/create_rollback":
    post:
      summary: Create movements rollback - Cria rollback de movimento
      tags:
      - Stock Movements - Movimentos de Estoque
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '201':
          description: rollback criado com sucesso
        '404':
          description: movimentação não encontrada
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                stock_movement:
                  type: object
                  properties:
                    stock_movement_id:
                      type: integer
                    moved_at:
                      type: string
                      format: date
                    notes:
                      type: string
                    employee_id:
                      type: integer
                  required:
                  - stock_movement_id
                  - moved_at
                  - employee_id
  "/users":
    get:
      summary: list users - Lista todos os Usuários (com ou sem filtro)
      tags:
      - Users - Usuários
      parameters:
      - name: q
        in: query
        schema:
          type: object
          properties:
            name:
              type: string
            email:
              type: string
            role:
              type: string
            cpf:
              type: string
            contract_type:
              type: string
            active:
              type: boolean
            admin:
              type: boolean
      responses:
        '200':
          description: successful
    post:
      summary: create user - Cadastra um Usuário
      tags:
      - Users - Usuários
      parameters: []
      responses:
        '201':
          description: created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                role:
                  type: string
                cpf:
                  type: string
                contract_type:
                  type: string
                active:
                  type: boolean
                password:
                  type: string
              required:
              - name
              - email
              - password
  "/users/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
    get:
      summary: show user - Mostra detalhes de um Usuário
      tags:
      - Users - Usuários
      responses:
        '200':
          description: successful
    patch:
      summary: update user - Atualiza o cadastro de um Usuário
      tags:
      - Users - Usuários
      parameters: []
      responses:
        '200':
          description: updated
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                role:
                  type: string
                contract_type:
                  type: string
                active:
                  type: boolean
    delete:
      summary: delete user - Excluui o cadastro de um Usuário
      tags:
      - Users - Usuários
      responses:
        '204':
          description: no content
  "/work_orders":
    get:
      summary: List work orders - Lista todas as ordens de serviço
      tags:
      - Work Orders - Ordens de Serviço
      security:
      - bearer_auth: []
      responses:
        '200':
          description: sucesso
    post:
      summary: Create work order - Cria uma nova ordem de serviço
      tags:
      - Work Orders - Ordens de Serviço
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '201':
          description: criado com sucesso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                work_order:
                  type: object
                  properties:
                    client_order_number:
                      type: string
                    opened_at:
                      type: string
                      format: date
                    started_at:
                      type: string
                      format: date
                    expected_end_at:
                      type: string
                      format: date
                    status:
                      type: string
                      enum:
                      - open
                      - in_progress
                      - closed
                      - canceled
                    priority:
                      type: string
                      enum:
                      - low
                      - medium
                      - high
                      - urgent
                    requester_name:
                      type: string
                    requester_department:
                      type: string
                    requester_contact:
                      type: string
                    responsible:
                      type: string
                    notes:
                      type: string
                    expected_days:
                      type: integer
                    value:
                      type: string
                    work_order_materials_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          material_id:
                            type: integer
                          quantity:
                            type: number
                          returned_quantity:
                            type: number
                    work_order_employees_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          employee_id:
                            type: integer
                  required:
                  - client_order_number
                  - opened_at
                  - started_at
                  - expected_end_at
                  - status
                  - priority
                  - requester_name
                  - requester_department
                  - requester_contact
                  - responsible
                  - expected_days
                  - value
  "/work_orders/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: integer
    get:
      summary: Show work order - Mostra detalhes de uma ordem de serviço
      tags:
      - Work Orders - Ordens de Serviço
      security:
      - bearer_auth: []
      responses:
        '200':
          description: sucesso
        '404':
          description: não encontrado
    delete:
      summary: Delete work order - Exclui a ordem de serviço (se possível)
      tags:
      - Work Orders - Ordens de Serviço
      security:
      - bearer_auth: []
      responses:
        '204':
          description: excluído com sucesso
        '422':
          description: não é possível excluir (ordem com materiais ou colaboradores)
    patch:
      summary: Update work order - Atualiza uma ordem de serviço
      tags:
      - Work Orders - Ordens de Serviço
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '200':
          description: ordem atualizada com sucesso
        '404':
          description: ordem não encontrada
        '422':
          description: parâmetros inválidos
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                work_order:
                  type: object
                  properties:
                    client_order_number:
                      type: string
                    opened_at:
                      type: string
                      format: date
                    started_at:
                      type: string
                      format: date
                    expected_end_at:
                      type: string
                      format: date
                    status:
                      type: string
                      enum:
                      - open
                      - in_progress
                      - closed
                      - canceled
                    priority:
                      type: string
                      enum:
                      - low
                      - medium
                      - high
                      - urgent
                    requester_name:
                      type: string
                    requester_department:
                      type: string
                    requester_contact:
                      type: string
                    responsible:
                      type: string
                    notes:
                      type: string
                    expected_days:
                      type: integer
                    value:
                      type: string
                    work_order_employees_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          employee_id:
                            type: integer
                    work_order_materials_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          material_id:
                            type: integer
                          quantity:
                            type: number
                          returned_quantity:
                            type: number
